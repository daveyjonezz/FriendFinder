<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Fascinate&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script src="https://kit.fontawesome.com/5f61df031e.js"></script>
    </script>
</head>

<body>
    <div class="container" style="font-family: 'Poppins'">
        <h2>Survey Questions</h2>
        <hr>
        <h3><strong>About You</strong></h3>
        <h4>Name (required)</h4>
        <input type="text" id="name" class="form-control" required>
        <br>
        <h4>Link to Photo Image (required)</h4>
        <input type="text" id="photo" class="form-control" required>
        <hr>
        <h3><strong>Question 1</strong></h3>
        <h4>I prefer TV Shows over Movies <i class="fas fa-tv"></i></h4>
        <select class="custom-select" id="Q1">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 2</strong></h3>
        <h4>I prefer Dogs over Cats <i class="fas fa-dog"></i></h4>
        <select class="custom-select" id="Q2">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 3</strong></h3>
        <h4>I prefer Lifting Weights over Cardio <i class="fas fa-dumbbell"></i></h4>
        <select class="custom-select" id="Q3">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 4</strong></h3>
        <h4>I prefer Burgers over Tacos <i class="fas fa-hamburger"></i></h4>
        <select class="custom-select" id="Q4">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 5</strong></h3>
        <h4>I prefer Apple over Android <i class="fab fa-apple"></i></h4>
        <select class="custom-select" id="Q5">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 6</strong></h3>
        <h4>I prefer Day-time over Night-time <i class="fas fa-sun"></i></h4>
        <select class="custom-select" id="Q6">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 7</strong></h3>
        <h4>I prefer Jedis over Siths <i class="fas fa-jedi"></i></h4>
        <select class="custom-select" id="Q7">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 8</strong></h3>
        <h4>I prefer Xbox over PS4 <i class="fab fa-xbox"></i></h4>
        <select class="custom-select" id="Q8">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 9</strong></h3>
        <h4>I prefer Girls over Boys <i class="fas fa-female"></i></h4>
        <select class="custom-select" id="Q9">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <h3><strong>Question 10</strong></h3>
        <h4>I prefer Money over Everything <i class="fas fa-money-bill"></i></h4>
        <select class="custom-select" id="Q10">
            <option selected disabled>Drop Me</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        <a href="#" class="btn btn-info submit" data-toggle="modal" data-target="#matchModal" style="background-color: #97AEDA; border-color: #97AEDA">Submit</a>
        <a href="/" class="btn btn-info reset" style="background-color: #97AEDA; border-color: #97AEDA; display: none">No New Friends</a>
        <div style="margin-top:15px; color:#fff">
            <a href="/api/friends" style="color:#fff">API Friends List</a> | <a
                href="https://github.com/daveyjonezz/FriendFinder.git" style="color:#fff" target="__blank">GitHub
                Repo</a>
        </div>
        <!-- MODAL -->
        <div class="modal fade" id="matchModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h3 class="modal-title">Friend Match <i class="fas fa-user-friends"></i></h3>
                </div>
                <div class="modal-body">
                  <h4 id="matchName"></h4>
                    <p id="matchPhoto"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                  </div>
              </div>
            </div>
          </div>
    </div>

    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="../../server.js"></script>
</body>

</html>
<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">
    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file
    var newFriend;
    $(".submit").on("click", function (event) {
        event.preventDefault();
        var scoresArr = []
        scoresArr.push($("#Q1").val().trim(),
            $("#Q2").val().trim(),
            $("#Q3").val().trim(),
            $("#Q4").val().trim(),
            $("#Q5").val().trim(),
            $("#Q6").val().trim(),
            $("#Q7").val().trim(),
            $("#Q8").val().trim(),
            $("#Q9").val().trim(),
            $("#Q10").val().trim()
        )
        console.log(scoresArr)
        // Here we grab the form elements
        newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: scoresArr.map(Number)
        };

        console.log(newFriend);

        // This line is the magic. It"s very similar to the standard ajax function we used.
        // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
        // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
        // depending on if a tables is available or not.

        $.post("/api/friends", newFriend, function (data) {
            console.log(data);
            $("#matchName").text(data.friendData)
            var img = $('<img id="dynamic">'); //Equivalent: $(document.createElement('img'))
            img.attr('src', data.photo);
            img.appendTo('#matchPhoto');
        });

        $(".submit").hide();
        $(".reset").show();
    });

    // function compatibility() {
    //     // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
    //     $.ajax({ url: "/api/friends", method: "GET" })
    //         .then(function (friendData) {

    //             // Here we then log the friendData to console, where it will show up as an object.
    //             console.log(friendData);
    //             console.log("------------------------------------");

    //             // Loop through and display each of the customers
    //             for (var i = 0; i < friendData.length; i++) {
    //                 for (var j = 0; j < 10; j++) {
    //                     var x = newFriend.Scores.map(function (item, index) {
    //                         // In this case item correspond to currentValue of array a, 
    //                         // using index to get value from array b
    //                         return item - friendData[i].Scores[index];
    //                         console.log(x)
    //                     })
    //                 }
    //             }
    //         });
    // }

    
</script>